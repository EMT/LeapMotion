<!DOCTYPE html>
<html>
<head>
	<title>World</title>
	<style>
  html {
    font-family: sans-serif;
  }

	.col-2 {
		width: 50%;
		float: left;
		display: block;
	}

  .grid {
    height: 100vh;
    width: 100vw;
  }

  .row {
    height: 10%;
    width: 100%;
  }

	#output {
		width: 100%;
	}
	</style>
</head>
<body>
    <h1>Hello, LeapJS (V2)!</h1>
    <div class="data">
      <p class="left-position"></p>
      <p class="top-position"></p>
    </div>
    <div class="grid">
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://js.leapmotion.com/leap-0.6.4.js"></script>
    <script src="https://js.leapmotion.com/leap-plugins-0.1.8.js"></script>

    <script type="text/javascript">
    var pointers = {};



    Leap.loop(function(frame) {

      frame.hands.forEach(function(hand, index) {
        var pointer = ( pointers[index] || (pointers[index] = new Pointer()) );
        pointer.setTransform(hand.screenPosition());
        pointer.setProperties(hand.screenPosition());


        if (hand.type == 'left') {
          console.log('volume and pitch');
        } else {
          console.log('frequency ?')
        }
      });

    }).use('screenPosition', {scale: 0.25});


    var Pointer = function() {
      var pointer = this;
      var img = document.createElement('img');
      img.src = 'https://lorelle.files.wordpress.com/2015/05/redblock.png?w=50&h=50';
      img.style.position = 'absolute';
      img.onload = function () {
        pointer.setTransform([window.innerWidth/2,window.innerHeight/2], 0);
        document.body.appendChild(img);
      }

      pointer.setTransform = function(position) {
        img.style.left = position[0] - img.width  / 2 + 'px';
        img.style.top  = position[1] - img.height / 2 + 'px';
        var scale = 0 - position[2] / 100;
        img.style.webkitTransform = img.style.MozTransform = img.style.msTransform =
        img.style.OTransform = img.style.transform;
      }

      pointer.setProperties = function(position) {
        pointer.x = position[0];
        pointer.y = position[1];
        pointer.top = 100 - ~~((position[1] / window.innerHeight) * 100);
        pointer.left = 100 - ~~((position[0] / window.innerWidth) * 100);
      }
    };

    pointers[0] = new Pointer();

    // This allows us to move the pointers even when not focused
    Leap.loopController.setBackground(false)

    </script>
  </body>
</html>